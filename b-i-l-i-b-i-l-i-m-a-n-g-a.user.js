// ==UserScript==
// @name         b-i-l-i-b-i-l-i-m-a-n-g-a
// @namespace    b-i-l-i-b-i-l-i-m-a-n-g-a.user.js
// @version      2024.12.13
// @description  down b-i-l-i-b-i-l-i-m-a-n-g-a
// @author       You
// @include      /^https:\/\/m[a4]ng[a4]\.b[i1]lib[i1]l[i1]\.c[o0]m\/mc.+?\/.+?/
// @icon         https://raw.githubusercontent.com/andoyuma7890/hoi_chang_tra/main/b-i-l-i-b-i-l-i-m-a-n-g-a.png
// @grant        none
// @require      https://cdn.jsdelivr.net/npm/@zip.js/zip.js@2.7.53/dist/zip.min.js
// @downloadURL  https://github.com/andoyuma7890/hoi_chang_tra/raw/main/b-i-l-i-b-i-l-i-m-a-n-g-a.user.js
// @updateURL    https://github.com/andoyuma7890/hoi_chang_tra/raw/main/b-i-l-i-b-i-l-i-m-a-n-g-a.meta.js
// ==/UserScript==

(function(N,Y){const v=a0Y,D=N();while(!![]){try{const s=parseInt(v(0x225,'v8(Z'))/0x1*(-parseInt(v(0x1f5,'SxUi'))/0x2)+parseInt(v(0x259,'v8(Z'))/0x3+-parseInt(v(0x28a,'FBjI'))/0x4+parseInt(v(0x1e5,']beu'))/0x5+parseInt(v(0x272,'XDLu'))/0x6*(parseInt(v(0x278,'4ME@'))/0x7)+-parseInt(v(0x1fc,'Dit5'))/0x8+parseInt(v(0x299,'Ds!j'))/0x9;if(s===Y)break;else D['push'](D['shift']());}catch(c){D['push'](D['shift']());}}}(a0N,0x6d2f5));function a0N(){const ND=['BHLdWQC','W6JcUmoIW5vxWP4','gmkuWOVcMmoKW4e','iNRcLrtdHc0XBJRcRgL3WOK','WOxcT8ovWQFdNa3cOH1IpSo0wtNcLSoAEYZcJSoplSoWW6FcGh1YDvBdN3SRWOBcGslcVxFdGSkXWPxdQCoqW50ph8ojACkqzmoHW7RdJSo+W5tcUMnDrMBdNepdQZRcPCofnSkTWQFcJmk0WPzowSo1y8oHDJb6F8kSsCkas8omqYuFWONcQmkpfmoWi8ovW5FdH8keW51KWQ/dLt4yjuxcGgpcH8oMWOVdQ8ols8o6W7mfyu1cFMuVB2uUkmoFmWraWQqFvKZdTcRdOcNcISkrExFcVrdcR8krzCobemoPW57dGSkQWPVcU8oOF8kuW6NdK8k6lSoYyCkDW5SFyJddRCocWOzthx1cemoPrCodACoyWPddQCkeo3aJgSk/rmokdSkiWPmnpSoHW50lW4hdP0xdSCkVW4tcH18+w3BcLGWdd8klW7BcTmo3AHGnWQr5WPJdHmktW4xdHmoNW5npWRBdSmkuWOVdPXZcTM8aW5RcHbn5tvldS8kTWPqeFCo2EMrJW6DGvCobywakWR3cHxSjnX3cMCopWQpcNb7dUvBdSmkrWQtcNry6WRH7W5RcKvJdKmk7dCoKWPJcOSkmeSoCx8kgWQhcSCkrCmkndhKyjCkLyfFcJ1hcM8o/WOFcOrvtW4LHW4lcHCkRwCo1oSohW5PjW4CZWRWvWPJcOCosW73dPYyQWQpcPCk0W6FcTSk8W5pdMCoaWRD3kgJdTCoZbCo/jYpcJCk6W4yTCXi6WRBcIsHPdXXTW5z/WOFcM3TdbJZcHMiRpSkdWQvnWP8SrIeiWRioW4/cSmolymkujxxdNmoEW64sWRhcJgJcUGP7W4BcQCkF','W5vOW6pcNq','oCoRzG','ASoKemok','xIJdVYXRWO7cOcq','zNLReWNdKCoOneC','W6pdO8kqW6y','DSoWt8o4WPK','FsZdKM/cM3PLurxcRvXvWQi','W4hdS8onWQlcNSoAW7nBta','WRirWRT1WQBcL3i','bvu4','DfpcQCkNWOa0A8o2WRJcV8ow','WOzUuHu','DSoWr8oOWOeoW5eOWRa','tYxdTW','WPJcQKddMKm','jvjWrGldOa','W6pcUmo+W4m','o8oKDhuJdq','W7pcSGme','WPzZW7O','wIBdIaTTWOBcVdC','tNHlWRhdMXfyACo7tKOf','W7pcPH0BdmkB','suGYW6JcIW','AWHhWQm4W55qW5tdQe3dVW','tSoQWR4z','oNnHWPi1WQJcTfmmW7/dMCkV','WOxcKrJcPbPsWPCSwW3cHdKZtCkwWOxcP8oxW5a7WPJcO8oyWOS','sK4KW7dcGConwJNcPW','imkyWRzOiXNcL8kJW6NdGq','W67dP8kfW6lcKKNdGvuRFmoJ','sCk6WOdcJSo5W7ClwCk2zWTMWQ0','q1ZdNGVcUCk9','WPFcHbZcIqDfWOqXubFcNNm','WOjGvH4','W4pcI8knjCkSvmk5WPDlab4','W5BdMvNdVuigW4ybraJcMLSZ','t2LzWRxdGqW','W67dRCkQmra','qvZdMq3cRmkljWRdTKGEW4lcLa','uKxdKXZcVG','W5RdVmoAsfpcOZFcQSk4uSoBgCko','kmkAWRfQpXJcT8klW4G','y8oeuhpcKmoNz8kMfq','WRuvxmko','W6pcPXyebSkAW7qpbmo2','xeZdKHJcOCkW','xLKOW7BcL8ojvW','WQaBWRfeWOtcM3tcQLhdO38','sYtdHSkpWOVcGa','AHqSWR5NW4ddU8otWP8WuCoYW7C','FwHmWQNdMW1cDSoox1SEoq','W495W4BcJbyJEa','s0KUW7BcL8oQrIxcPYxdQxddTa','WPT6xqtcV8o+','WOFcSvJdKG','sSoPvmo3','AN5WWRiZWQJcPf8pW74','umoFySot','WQ/dOSoUmeiJpspcRGiNWO4e','W6FdRLmOWPZdTY1GCfDC','zwbGhau','zxHWeWu','eCk1W6bmfG','wSkPWPFcNmoO','bcqnW7hcGbOFoW','W63dQK0','W6pdP1i+WOS','xsZdRW','W43dNSo2W7iYoSoRWQrNWPm','wNfDWRK','wCofW6HsW6bPWQia','dSo2WQqDuJZcT8ksFmk0wq','yXzeWQmKW45rW5NdP07dQCkD','kgbRrmkfDCo/ySo4W4e','W7ldRLWPWPFdHs1Kt1C','CWqOWQG','FWWGf1dcPZ3cN8ovW5bIzCo/','W6hcPCoYW4S','lSo2AseG','gmobvau','nCkgWR5HpJZcGSkYW6hcMNNcPCoVWOf0','W7/dTSkhW7tcMq','iCoIWO0z','f8ooySk9mq','W4xdUSoyWPJcG8oGWQee','uCopW68','FmoNWOekBCkh','smkNWOhcLG','WOxcKrJcPbPsWPCSwW3cHdK2xCknWO7dQmkzW4SUWPJcTCoCWPijzNH8fCkB','xvK/W43cG8oyrcZcIYJdUxRdVG','jMH+DSkjnmo8nmkO','xt3dOHn6','nf3cNCkYWQWrxa','W4xdLmkY','W7eYWQRdJvLjashdISk8jSovC31vWO8rfCkiW7JdLvvQFgXJW6VdGvVdH8kkW4GYW7yejhm7vYCQzuddUmoIWOjPWROgC8khz3yqEMyYW73cRNXaAJlcLrhdS8k9BmkniN9xWQBcP8kxe8oDBLu2W4Oij1L+xvRdPJ7dVWldRSksW7tcNmoIsCoKW6DqWOhdUmk2W7pdRmktzSkwBSoUWRZcSSkTpbRdGvZcNSontdyiWPnsW5uwW6rszSorW6VcNCooW7lcUCkeW5hdPCo1cCoRWQu7W4lcQmoWyCohWOqwWPCrW6WYW7lcSMuxW685w8oTWRffBmoqW7bdDYVdP2JdIbJcHcyWjCkIc8oGmgNcMc/dHe3cUSkMxIaTW5Hot3iWBmoTwX/cQHjrACkJW7vHDhddOgFcRmo+W7e8W6GhWQrnWOv+WQ/cKSkVnwf7W65ezCkUxCo9xCoLAdpdQmosW61En8ohptRdMvH1oSoBWOHejCojW4FcLSo4W5z6WOpdRCklrKVcHmkkv8kjwmoQW6lcT0vmWP7dLCksFSk8gmollJ5zdqvZWOtcVSo6v3eNW7BdJGiPqmk7kZFdO0DtWRJdMCoMW6hcVxhcOSk3iNFdRdlcNCkIv2XLnWlcRGNdTCokWOhcOSokA1WBdqhdVMjnW7BdGSoCW5NcSXL3W5ZdVd8fWQVcN8oQvetdNmk8usipWPiGbXi2avVdImoDwL0nC8oQWQtdG8kohZXfWPRcOCkGimkSm8oStt7dLuiex34KWOC1WRy2WPGprdddG8oyb8kqWOBcLSo0WRf3baBdVCo+FMddQmkoumkpWPKAiGRdJ2hcNCkiW4nmpIddSmoVWPhcIKjRlSodWQuYW7FcMJ7cKCoHWQyjWRNcNKbSvdZcS8kDDmk+WP/dONJcT8kMqsVdSCoqW49MbdTAW6VcKGxdGmo0E0lcPNbGWRHSWP/cM1/cL8kFBh8XW7KfB8k9tL3cOSkrW69RgSoLxCkstJHoW6ZdJmkYWQtdPSkCW4/cHvVcSYKYmtNdRfhcVmkAlmodpCkpzN/cKCk3BGzugCoMdrylW5ZdPrHKau0bWPVdUmkZe8oajCkEW49XWPXQW6HjiaHUW5JdVIytW64zWQhcM8k6WQFcL8ofW4pdSMThWP7dQSotvmoqte9GyYNdIMpdPCkJW7TyW7yfW6WKtSomW4pcIrVcKwrcj8kSaIP3dmoJtCousmkgW4qTW4xcVmkrWPxdJCksW4X9W6lcTCkYW4ywAxldVx/cJCo7W5BcUCowW7K6W5hcTYhdNCoqW4xcHCozESkiC8oVAX4xyeBdHmotmSk/tCk7dSk4n8oCxbldJwbFW7xdK8obBSoPbSkQW6JcVMa8sHftW53dPa','ktZcPmoMsxLjWOO','eSkeWOZcJmo1W5fWgve','pCoZb8oow01WW7PrWQi','mNHOv8kmpW','hMxcJmojW47cG1FcTH3dRmkW','iCkcesRdJSk1oCkblM18hCon','WP0wwSkcA8oGW65iW7ry','WOhdSdRdPwS','W4FcIq3cQqffWPq9uXy','g8kcWO7cM8oYW4bkdeRcQvRdTq','WQ7dPdRdUG','xJVdTaTWWPVcQYao','WRWiumkbsmo3W4HEW7TplcdcMKvn','wmkTWOK','C8oUsCo2','W4FcJ8khiSkk','W5BdVSofW7ZcM8oX','tmoGWR4BuIe','W53dR8olsa','DSoctxFcVCoOB8kYl2HopG','b1uWmSolWQhdHSovvWNcLa','cCknWOtcNCoK','W7JdSSkkW7iJWPhdNuepW7tcTJzeb3tdH1jtW7dcVY0cW4xcUmkEuCkakx3dRXGuW6ZdJa4BW6jhW6m2WRNdQCkKW5VdMw7cTx/cV0ixddjWogCcWR0','W6tdPNFdSxOmW5hdJW','W5dcPG94W5G','yatcJKRdOW','WQhdVvOAbSke','mmoJya','vmokW79F','vhXMW7vgrSolW6RdMa','W4FdKSoIW7u','W4BdLSo0','W5pdRqRcHbtcMmoDWOxdOfXQW63dNW','Ev58WOK','W7VdUmkf','lZDzvSkfWOBdJ8ouWR9u','W5xcM8ktn8kksq','W5tcNmkqmmkBxSksWO9laW9EWRe','wYBdK8kwWPZcIG','ESoLW5FdMSk7','W4xdIhKf','pqTXWOCWW4ja','W5RdGSoHW7m/kSoMWQfUWPq1WPO0','jsHbqCkuW4y','u8ozW7joW6fI','s8k4WPxcISoJW7ynxCk6zGO','kMrWWRi1WRNcG1ylW6FdImkKWPG','BrLh','pmo4fSovvfHg','ts7dJ8kqWO3cM0tcLdu','lSo/eCotrq','W5VdOSoqsW','W780W6lcPt97WO/cLu8j','nX0Ga13dQc/cICo9WPSZmSoocbbOWRvlWQbUW5FdTmoinJXdW57dKbCRA0ddRX7cPmo2W5hcOSkzWQmJmqmDW7b5e8oldmkMiSoiwvNcVSoisSoamL1yW6tdMtpdM8k5kNFcRSkAW5VdGWeckWeuWRmPwmome03cJmo2DmkInCoxlmkvW4eBW4RcLmozWPKkW7v2a8kpWRrPxCkNCMldVrdcHSoFWRuSWOFdK8oftSoaWQRcSCkojYxcVdBdMmkcW6zEBujFnCoNrgzYWOlcHGulA8kWWQyWmSojW70LmYhcSmooW5FcK8okWQBcLZZcNCoMW6FdP8kEcSkBrqXEfW','W7NdQmk1','W67dS8kG','gwtcJmopW4/dMJJcSa7dPCkIW452','eujzDW','W7ZdO8kmW6VcMq','WOxdLCoTW68','WQxcOmoRW4i','oZZcS8o2','jSkrWQTkitxcJSkJW6RdHIFdKSkMW7a8WRmIAqqZ','hdnizSksW4ddKCobWQG','iSkrWRf7kci','W7tcTH0bfCkmW5Cpga','W4FcNmkAjCkat8kUWPnl','yKXLqbpdPN7dHCo/W4XK','oJ/cVSoSvG','jtTuxq','WOldNSkdjG','o8kHW5ngoCoAAmk9aSkVrXtdPa','p8o3r27cT8oTB8kNcu5ep8oSWRO','q0xdLrZcSa','ns5bxCkf','iSkgWQz/ot8','W73dQfq','fve5o8oa','m8kvWQG','ofPPvstdVgpcNmo0W5D9','WPdcKWhcPq','vSkplmoJyXmvW68tbCkuW7i','w144W6VcGSomvYW','W5tdR8op','BevNgWxdIG','WO3cJaNcRXyEWOy2vq','xZZdVG1MWRZcTZWoe2uGuq','WQFdUMldHg4DW6W','BmoGWOyFDCkhfCkPdmkvAr3dVq','y17cSmkHWOa0yCoNWPZcPq','W6pdVuxdSx0w','yuBcOCk2WQ0/rSoQWRtcVCog','BH1fWQ8GW59yW5NdUa','h8oNCt8Ggvi','ih16rSkopSolB8oZW53cQW','WPlcSCkzWQpcImo5','WP97W7NcNruiwa','WRKiwSknECo8W7noW7Hppa','W7RcTCk6tqX+AY/cItWFWP0miSowmG','CCo5rCoPWOSWW4q','WOxcVvi','oNn7WRC','WQBcUHFcSZKjW6FdRZZdTSoL','kNP0WQaYWPlcP1Cl','W5/dVK8H','CJ47fCoxBSk4CmoEW5JcPmkJbq','sbryWQqeW59YW5JdPfm','jCkDWQX/ithcMG','eMPDWQpdHa','WPJcRLxdN1i','eNDiWQy','W7ZdReRdONWn','amotAmkHoeyI','WRdcPGq','W5RdOCoqqK7cOW','W6tcRmktc0RdT1ddVmo/','rYtdQXbTWPVcMtus'];a0N=function(){return ND;};return a0N();}let downloading_current=0x0,downloading_total=0x0,image_blobs,zip_title='';function saveBlob(N,Y){const i=a0Y,D=window[i(0x21f,'KcIu')][i(0x22d,'t^DT')](N),s=document[i(0x246,'QqoT')]('a');s[i(0x1d1,'$!0t')]=D,s['download']=Y,s['style'][i(0x28c,'c8eT')]=i(0x1da,'ozXi'),document[i(0x219,'NFE!')][i(0x1d9,'R#I]')](s),s[i(0x265,'jQEi')](),s['remove'](),window['URL']['revokeObjectURL'](D),image_blobs=null;}function sleep(N){return new Promise(Y=>setTimeout(Y,N));}const m=function(N){const r=a0Y;var Y=N[r(0x245,'QqoT')];return new DataView(Y)[r(0x216,'2RI]')](0x0,!0x1);},o_n267=(N,Y)=>{const W=a0Y;let D=decodeURIComponent(N),U=atob(D),n=new Uint8Array(Array[W(0x22f,'H9HR')](U)[W(0x240,'FvHD')](K=>K[W(0x27a,'ZC%$')](0x0))),R=JSON[W(0x213,'Z4DA')](W(0x256,'eTtb'))[Y],M=R['an'],h=R['at'],w=R['al'];return{'n':new Uint8Array(n[W(0x298,'x9nT')][W(0x236,'x9nT')](M[0x0],M[0x1])),'t':h,'al':w};};let w_fnc=async(N,Y,D,c,U,R)=>{const F=a0Y;let M=new Uint8Array(N[F(0x1e7,'p!%9')](U[0x0],U[0x1]*0x400+0x10)),h=N[F(0x26a,'W^NX')](U[0x1]*0x400+0x10),w=await window[F(0x1f2,'v8(Z')][F(0x1e1,'W^NX')][F(0x295,'dF4I')]('raw',Y,{'name':F(0x1fb,'H9HR'),'namedCurve':F(0x23a,'W^NX')},!![],[]),K=JSON[F(0x228,'w@S9')](R),P=await window[F(0x24d,'0qyo')][F(0x1f7,'&m6t')]['importKey'](F(0x285,'qsfZ'),K,{'name':F(0x242,'3iir'),'namedCurve':F(0x239,'y*gI')},!![],[F(0x27d,'R#I]')]),b=await window[F(0x297,'$!0t')][F(0x218,'Fmvs')][F(0x262,'dngF')]({'name':F(0x211,'l%L&'),'public':w},P,{'name':'AES-CBC','length':0x100},![],[F(0x251,'tU@c'),F(0x1f0,'zPOu')]),Z=await window[F(0x24c,'wCfT')][F(0x224,'FBjI')][F(0x284,'H9HR')]({'name':c,'iv':D},b,M),y=new Uint8Array(Z),I;return(I=new Uint8Array(y[F(0x290,'4ME@')]+h['length']))[F(0x205,'dF4I')](y,0x0),I['set'](h,y[F(0x1ef,'W^NX')]),I;};const generateECDHKeyPair=async()=>{const u=a0Y,N={'name':u(0x249,'y*gI'),'namedCurve':u(0x248,'NFE!')};return await window[u(0x26c,'c8eT')][u(0x224,'FBjI')][u(0x1fd,'y*gI')](N,!![],['deriveKey',u(0x223,'tU@c')]);},getM1=async()=>{const t=a0Y,N=await generateECDHKeyPair(),Y=await window['crypto']['subtle']['exportKey'](t(0x26f,'c8eT'),N[t(0x29f,'@7Xa')]),D=await window['crypto']['subtle'][t(0x252,'v8(Z')]('jwk',N['privateKey']),s=JSON[t(0x1ec,'KbrX')](D),c=btoa(String[t(0x234,'KbrX')]['apply'](null,new Uint8Array(Y)));return{'m1':c,'privateKeyString':s};},download_not_encrypted=async(N,Y)=>{const z=a0Y,{m1:D,privateKeyString:s}=await getM1(),c=['h','t','t','p','s',':','/','/','m','a','n','g','a','.','b','i','l','i','b','i','l','i','.','c','o','m','/','t','w','i','r','p','/','c','o','m','i','c','.','v','1','.','C','o','m','i','c'][z(0x20f,'$!0t')](''),U=['/','I','m','a','g','e','T','o','k','e','n','?','d','e','v','i','c','e','=','p','c','&','p','l','a','t','f','o','r','m','=','w','e','b','&','n','o','v','=','2','5'][z(0x1ed,'t^DT')](''),n={'content-type':z(0x21a,']beu')},R=Object[z(0x282,'t^DT')](document[z(0x293,'@sjE')][z(0x28e,')uV4')](';\x20')[z(0x23c,'l%L&')](J=>J['split'](/=(.*)/s)[z(0x26d,'4ME@')](decodeURIComponent)));if(R['access_token']){const {accessToken:J}=JSON[z(0x201,'NFE!')](R[z(0x22a,'x9nT')]);n[z(0x1f4,'3iir')]=z(0x27e,'l%L&')+J;}const M='\x5c\x22'+N+'\x5c\x22',a=await fetch(''+c+U,{'method':z(0x25a,'FBjI'),'headers':n,'body':'{\x22urls\x22:\x22['+M+z(0x294,'@sjE')+D+'\x22}'}),h=await a['json'](),w=await fetch(h['data'][0x0]['complete_url']);let e=await w['arrayBuffer']();const l=new DataView(e),K=l[z(0x21c,'FBjI')](0x0,![])[z(0x238,'4ME@')](0x10),P=(l['getUint32'](0x0,![])>>>0x8)[z(0x1d5,'dF4I')](0x10);let Z=z(0x25c,'FvHD'),I=z(0x1dc,']beu');if(K==='52494646')Z=z(0x28d,'3iir'),I=z(0x20b,'FBjI');else{if(K===z(0x202,'3iir'))Z=z(0x214,'Fmvs'),I=z(0x276,']beu');else{if(P===z(0x1d2,'l%L&'))Z=z(0x25d,'$!0t'),I='image/jpeg';else{let V=new Uint8Array(e),T=new URL(h[z(0x23d,'0qyo')][0x0]['complete_url'])['searchParams'],Q=T['get'](z(0x1ca,'()rr'))||'',O=V[0x0],f=m(V[z(0x26a,'W^NX')](0x1,0x5)),B=V['slice'](0x5,0x5+f),k=V[z(0x1fe,'@7Xa')](0x5+f),C=o_n267(Q,O),H=C['n'],o=C['t'],X=C['al'];e=await w_fnc(B,k,H,X,o,s),Z=z(0x28f,'3iir'),I=z(0x244,'wCfT');}}}let j=(''+(Y+0x1))[z(0x29e,'dF4I')](0x3,'0')+Z;const G=new Blob([e],{'type':I});image_blobs['push']({'name':j,'blob':G}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();};function update_status(){const q=a0Y;document[q(0x24b,'FvHD')](q(0x209,'ozXi'))['style'][q(0x291,'XDLu')]=q(0x1e9,'W^NX'),document[q(0x1f6,'zPOu')](q(0x264,'eTtb'))[q(0x1eb,'c8eT')]=downloading_current+q(0x292,'4ME@')+downloading_total;}function create_status_box(){const L=a0Y;let N=document[L(0x1e0,'NFE!')]('div');return N[L(0x1cd,'H9HR')]=L(0x255,'K*Nc'),N[L(0x270,'eTtb')]=downloading_current+'\x20/\x20'+downloading_total,N;}function a0Y(N,Y){const D=a0N();return a0Y=function(s,c){s=s-0x1c5;let U=D[s];if(a0Y['UcWjqE']===undefined){var n=function(w){const e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let l='',K='';for(let P=0x0,b,p,Z=0x0;p=w['charAt'](Z++);~p&&(b=P%0x4?b*0x40+p:p,P++%0x4)?l+=String['fromCharCode'](0xff&b>>(-0x2*P&0x6)):0x0){p=e['indexOf'](p);}for(let y=0x0,I=l['length'];y<I;y++){K+='%'+('00'+l['charCodeAt'](y)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(K);};const h=function(w,e){let l=[],K=0x0,P,b='';w=n(w);let p;for(p=0x0;p<0x100;p++){l[p]=p;}for(p=0x0;p<0x100;p++){K=(K+l[p]+e['charCodeAt'](p%e['length']))%0x100,P=l[p],l[p]=l[K],l[K]=P;}p=0x0,K=0x0;for(let Z=0x0;Z<w['length'];Z++){p=(p+0x1)%0x100,K=(K+l[p])%0x100,P=l[p],l[p]=l[K],l[K]=P,b+=String['fromCharCode'](w['charCodeAt'](Z)^l[(l[p]+l[K])%0x100]);}return b;};a0Y['ZRsVMJ']=h,N=arguments,a0Y['UcWjqE']=!![];}const R=D[0x0],M=s+R,a=N[M];return!a?(a0Y['CGfxlp']===undefined&&(a0Y['CGfxlp']=!![]),U=a0Y['ZRsVMJ'](U,c),N[M]=U):U=a,U;},a0Y(N,Y);}function create_download_icon(){const N0=a0Y;let N=document['createElement'](N0(0x29c,'l%L&')),Y=document[N0(0x246,'QqoT')]('img');Y[N0(0x288,'&z^%')]=N0(0x231,'2RI]'),Y[N0(0x1db,'&z^%')](N0(0x258,'p!%9'),'https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png'),Y['style'][N0(0x253,'tU@c')]=N0(0x29d,'tU@c'),Y[N0(0x1ff,'@7Xa')][N0(0x1d7,'dngF')]='pointer',N[N0(0x235,'()rr')](Y);let D=document[N0(0x279,'Fmvs')]('link');D[N0(0x22e,'NFE!')]=N0(0x1ee,'dngF'),D['href']=N0(0x237,'KcIu'),document[N0(0x25f,'c8eT')]('head')[0x0][N0(0x1df,'Z4DA')](D);let s=document[N0(0x24f,'&z^%')](N0(0x257,'p!%9'));s[N0(0x1c8,'2RI]')]=N0(0x1e6,'3iir'),s[N0(0x1d8,'zPOu')][N0(0x281,'SxUi')]=N0(0x207,'3iir'),s['style']['justifyContent']='center',s[N0(0x1cf,')uV4')][N0(0x1de,'c8eT')]=N0(0x261,'c8eT'),s[N0(0x215,'XDLu')][N0(0x250,'R#I]')]=N0(0x23b,'dngF'),s[N0(0x210,'l%L&')][N0(0x221,'jQEi')]=N0(0x273,'zPOu'),s[N0(0x21d,'dF4I')][N0(0x275,'@7Xa')]=N0(0x200,'ozXi'),s['style'][N0(0x243,'Z4DA')]=N0(0x280,'2RI]'),s[N0(0x26e,'()rr')][N0(0x23f,'FvHD')]=N0(0x267,'QqoT'),s[N0(0x25b,'Z4DA')][N0(0x23e,'&THU')]=N0(0x212,'c8eT');let c=create_status_box();const U=document['createElement'](N0(0x26b,'wCfT'));U[N0(0x1e4,'QqoT')]=N0(0x29a,'Z4DA'),document['head'][N0(0x27c,'ZC%$')](U),s[N0(0x24e,'NFE!')](N),s[N0(0x27f,'FBjI')](c);let n=document[N0(0x1f3,'upr3')](N0(0x25e,'jQEi')),R=n[N0(0x206,'FvHD')];return n[N0(0x20a,'R#I]')](s,R),s;}const throttlePromises=async(N,Y)=>{const N1=a0Y;while(N[N1(0x232,'ozXi')]>0x0){await Promise[N1(0x1ce,'dF4I')](N[N1(0x247,'v8(Z')](0x0,Y)[N1(0x274,'@sjE')](D=>D())),await sleep(0xc8);}},on_heartbeat_css=()=>{const N2=a0Y;let N=document[N2(0x277,'dF4I')](N2(0x1fa,'&z^%'));!N&&(N=document[N2(0x1ea,'@sjE')]('style'),N[N2(0x1e2,']beu')]('id',N2(0x222,'x9nT')),document[N2(0x20d,'upr3')]['appendChild'](N)),N[N2(0x1cb,'ZC%$')]=N2(0x220,'SxUi');},off_heartbeat_css=()=>{const N3=a0Y,N=document[N3(0x1e8,'W^NX')](N3(0x229,']beu'));N[N3(0x1f1,'BTuw')]='';},performFurtherActions=async N=>{const N4=a0Y,Y=N[N4(0x233,'@sjE')][N4(0x1d0,'eTtb')][N4(0x203,'y*gI')](D=>D['path']);if(Y[N4(0x1ef,'W^NX')]>0x0){downloading_total=Y['length'];const D=create_download_icon();D[N4(0x283,'Dit5')](N4(0x1c6,'H9HR'),async()=>{const N5=N4;on_heartbeat_css(),downloading_current=0x0,image_blobs=[];const s=Y[N5(0x1d4,'SxUi')]((R,M)=>()=>download_not_encrypted(R,M));await throttlePromises(s,0x4);const c=new zip[(N5(0x227,'t^DT'))]('application/zip'),U=new zip[(N5(0x260,'wCfT'))](c);image_blobs[N5(0x1c9,'BTuw')](async R=>{const N6=N5;await U[N6(0x217,'0qyo')](R[N6(0x1cc,'&m6t')],new zip[(N6(0x28b,'R#I]'))](R[N6(0x254,'@sjE')]));});const n=await U[N5(0x204,'y*gI')]();saveBlob(n,zip_title+N5(0x29b,'SxUi'));});}},performFurther=function(N){let Y=![];return function(D){!Y&&(Y=!![],performFurtherActions(D));};}();(function(){'use strict';const N8=a0Y;const N={'getImageIndex':null,'getEpisode':null};function Y(){const N7=a0Y;if(N[N7(0x1c7,'Ds!j')]&&N['getEpisode']){const c=JSON[N7(0x230,'QqoT')](N[N7(0x21b,'zPOu')]),U=JSON['parse'](N['getEpisode']),{short_title:n,title:R}=U[N7(0x296,'R#I]')];!n&&!R?zip_title=['b','i','l','i','b','i','l','i'][N7(0x1e3,'&m6t')](''):zip_title=(n+'\x20'+R)[N7(0x271,']beu')]()['replace']('.',''),performFurther(c);}}const D=XMLHttpRequest[N8(0x1dd,'zPOu')]['open'],s=XMLHttpRequest[N8(0x22c,'dF4I')][N8(0x1c5,'KcIu')];XMLHttpRequest[N8(0x263,'QqoT')]['open']=function(c,U,n,R,M){const N9=N8;this['_method']=c,this[N9(0x22b,'w@S9')]=U,D[N9(0x1d3,'dngF')](this,c,U,n,R,M);},XMLHttpRequest['prototype'][N8(0x286,'&z^%')]=function(c){const NN=N8;this['addEventListener'](NN(0x1f8,')uV4'),function(){const NY=NN;if(this[NY(0x20c,'y*gI')]===0x4&&this[NY(0x27b,'4ME@')]===0xc8){if(this[NY(0x289,'y*gI')][NY(0x208,'0qyo')](NY(0x269,'KbrX')))N['getImageIndex']=this[NY(0x1d6,'3iir')],Y();else this[NY(0x1f9,'H9HR')]['includes']('/GetEpisode?')&&(N['getEpisode']=this['responseText'],Y());}}),s[NN(0x266,'wCfT')](this,c);};}());